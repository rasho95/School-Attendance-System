<div class="reg-container">
    <div class="patron-reg-form" *ngIf="registerUserType == 'Patron'">
        <h2 class="reg-header">
            <strong>{{ registerUserType }} Registration</strong>
        </h2>
        <form [formGroup]="patronRegForm" (ngSubmit)="onSubmit(patronRegForm.value)">
            <div class="form-row">
                <div class="form-row-element">
                    <label for="email">
                        EMAIL
                    </label>
                    <input id="email" type="text" formControlName="email">
                    <div *ngIf="prf.email.invalid && prf.email.touched" class="error-field">
                        Please enter a valid email address!
                    </div>
                </div>
            
                <div class="form-row-element">
                    <label for="name">
                        FIRST NAME
                    </label>
                    <input id="name" type="text" formControlName="name">
                    <div *ngIf="prf.name.invalid && prf.name.touched" class="error-field">
                        Name is required!
                    </div>
                </div>
            
                <div class="form-row-element">
                    <label for="surname">
                        SURNAME
                    </label>
                    <input id="surname" type="text" formControlName="surname">
                    <div *ngIf="prf.name.invalid && prf.name.touched" class="error-field">
                        Surname is required!
                    </div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-row-element">
                    <label for="username">
                        USERNAME
                    </label>
                    <input id="username" type="text" formControlName="username">
                    <div *ngIf="prf.username.invalid && prf.username.touched" class="error-field">
                        User is required! Length must be 6!
                    </div>
                </div>

                <div class="form-row-element">
                    <label for="password">
                        PASSWORD
                    </label>
                    <input type="password" formControlName="password">
                    <div *ngIf="prf.password.invalid && prf.password.touched" class="error-field">
                        Password should have 1 upper, 1 lower, 1 number and have at least 8 characters
                    </div>
                </div>
            
                <div class="form-row-element">
                    <label for="phone">
                        PHONE
                    </label>
                    <input id="phone" type="number" formControlName="phone">
                    <div *ngIf="prf.phone.invalid && prf.phone.touched" class="error-field">
                        Phone is required!
                    </div>
                </div>
            </div>

            <label for="address">
                STREET ADDRESS
            </label>
            <input type="address" formControlName="address" style="width: 89.4%;">
            <div *ngIf="prf.address.invalid && prf.address.touched" class="error-field">
                Address is required!
            </div>

            <div class="form-row">
                <div class="form-row-element">
                    <label for="city">
                        CITY
                    </label>
                    <input id="city" type="text" formControlName="city">
                    <div *ngIf="prf.city.invalid && prf.city.touched" class="error-field">
                        City is required!
                    </div>
                </div>
            
                <div class="form-row-element">
                    <label for="province">
                        PROVINCE
                    </label>
                    <input id="province" type="text" formControlName="province">
                    <div *ngIf="prf.province.invalid && prf.province.touched" class="error-field">
                        Invalid Province. Length must be 2!
                    </div>
                </div>
            
                <div class="form-row-element">
                    <label for="postalCode">
                        POSTAL CODE
                    </label>
                    <input id="postalCode" type="text" formControlName="postalCode">
                    <div *ngIf="prf.postalCode.invalid && prf.postalCode.touched" class="error-field">
                        Invalid Postal Code!
                    </div>
                </div>
            </div>

            <div formArrayName="vehicles">
                <div class="form-row" *ngFor="let v of vehicleLabels.controls; let i=index" [formGroupName]="i">
                    <div class="form-row-element">
                        <label for="vehicleMake">
                            VEHICLE MAKE
                        </label>
                        <input id="vehicleMake" type="text" formControlName="vehicleMake">
                        <div *ngIf="getValidity(0).invalid && getValidity(0).touched" class="error-field">
                            All Vehicle specific fields are required!
                        </div>
                    </div>
                
                    <div class="form-row-element">
                        <label for="vehicleModel">
                            VEHICLE MODEL
                        </label>
                        <input id="vehicleModel" type="text" formControlName="vehicleModel">
                    </div>
                
                    <div class="form-row-element">
                        <label for="license">
                            LICENSE PLATE NUMBER
                        </label>
                        <input id="license" type="text" formControlName="license">
                    </div>

                    <input id="del-vehicle-btn" type="button" value="Del" *ngIf="i !== 0" (click)="deleteVehicleLables(i)">
                    <input id="add-vehicle-btn" type="button" value="Add" *ngIf="i == 0" (click)="addVehicleLabels()">
                </div>
            </div>

            <label for="security1">
                SECURITY QUESTION 1
            </label>
            <input id="security1" type="text" formControlName="security1" style="width: 89.4%;">
            <div *ngIf="prf.security1.invalid && prf.security1.touched" class="error-field">
                This field is required!
            </div>

            <label for="answer1">
                ANSWER 1
            </label>
            <input id="answer1" type="text" formControlName="answer1">
            <div *ngIf="prf.answer1.invalid && prf.answer1.touched" class="error-field">
                This field is required!
            </div>

            <label for="security2">
                SECURITY QUESTION 2
            </label>
            <input id="security2" type="text" formControlName="security2" style="width: 89.4%;">
            <div *ngIf="prf.security2.invalid && prf.security2.touched" class="error-field">
                This field is required!
            </div>

            <label for="answer2">
                ANSWER 2
            </label>
            <input id="answer2" type="text" formControlName="answer2">
            <div *ngIf="prf.answer2.invalid && prf.answer2.touched" class="error-field">
                This field is required!
            </div>

            <br>
            <button 
                type="submit" 
                [disabled]="patronRegForm.invalid" 
                title="Complete form to enable button">
                Register 
                <span class="loader"></span>
            </button>
        </form>

        <p>Not a Patron? Click <a (click)="switchToEnforcerForm()">here</a></p>
    </div>

    <div class="enforcer-reg-form" *ngIf="registerUserType == 'Enforcer'">
        <h2 class="reg-header">
            <strong>{{ registerUserType }} Registration</strong>
        </h2>
        <form [formGroup]="enforcerRegForm" (ngSubmit)="onSubmit(enforcerRegForm.value)">
            <div class="form-row">
                <div class="form-row-element">
                    <label for="email">
                        EMAIL
                    </label>
                    <input id="email" type="text" formControlName="email">
                    <div *ngIf="erf.email.invalid && erf.email.touched" class="error-field">
                        Please enter a valid email address!
                    </div>
                </div>
            
                <div class="form-row-element">
                    <label for="name">
                        FIRST NAME
                    </label>
                    <input id="name" type="text" formControlName="name">
                    <div *ngIf="erf.name.invalid && erf.name.touched" class="error-field">
                        Name is required!
                    </div>
                </div>
            
                <div class="form-row-element">
                    <label for="surname">
                        SURNAME
                    </label>
                    <input id="surname" type="text" formControlName="surname">
                    <div *ngIf="erf.name.invalid && erf.name.touched" class="error-field">
                        Surname is required!
                    </div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-row-element">
                    <label for="username">
                        USERNAME
                    </label>
                    <input id="username" type="text" formControlName="username">
                    <div *ngIf="erf.username.invalid && erf.username.touched" class="error-field">
                        User is required! Length must be 6!
                    </div>
                </div>
            
                <div class="form-row-element">
                    <label for="phone">
                        PHONE
                    </label>
                    <input id="phone" type="number" formControlName="phone">
                    <div *ngIf="erf.phone.invalid && erf.phone.touched" class="error-field">
                        Phone is required!
                    </div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-row-element">
                    <label for="password">
                        PASSWORD
                    </label>
                    <input type="password" formControlName="password">
                    <div *ngIf="erf.password.invalid && erf.password.touched" class="error-field">
                        Password should have 1 upper, 1 lower, 1 number and have at least 8 characters
                    </div>
                </div>
            
                <div class="form-row-element">
                    <label for="badge">
                        BADGE NUMBER
                    </label>
                    <input id="badge" type="number" formControlName="badge">
                    <div *ngIf="erf.badge.invalid && erf.badge.touched" class="error-field">
                        Badge is required! Length must be exactly 8!
                    </div>
                </div>
            </div>

            <label for="security1">
                SECURITY QUESTION 1
            </label>
            <input id="security1" type="text" formControlName="security1" style="width: 89.4%;">
            <div *ngIf="erf.security1.invalid && erf.security1.touched" class="error-field">
                This field is required!
            </div>

            <label for="answer1">
                ANSWER 1
            </label>
            <input id="answer1" type="text" formControlName="answer1">
            <div *ngIf="erf.answer1.invalid && erf.answer1.touched" class="error-field">
                This field is required!
            </div>

            <label for="security2">
                SECURITY QUESTION 2
            </label>
            <input id="security2" type="text" formControlName="security2" style="width: 89.4%;">
            <div *ngIf="erf.security2.invalid && erf.security2.touched" class="error-field">
                This field is required!
            </div>

            <label for="answer2">
                ANSWER 2
            </label>
            <input id="answer2" type="text" formControlName="answer2">
            <div *ngIf="erf.answer2.invalid && erf.answer2.touched" class="error-field">
                This field is required!
            </div>

            <br>
            <button type="submit" [disabled]="enforcerRegForm.invalid">Register</button>
        </form>

        <p>Not an Enforcer? Click <a (click)="switchToPatronForm()">here</a></p>
    </div>
    <p>
        If you already have an account, Login
        <a title="Go to the login page" [routerLink]="['/']">
            here
        </a>
    </p>
</div>